"use strict";var Layout={win:$(window),body:$("body"),header:$("body > header"),headerHeight:$("body > header").outerHeight(),boxResult:$(".result"),boxResPos:$(".result").position(),boxes:$(".boxes"),cmScrollz:$(),topBoxesCon:$(".top-boxes"),topBoxesWidth:$(".top-boxes").outerWidth(),topBoxesHeight:$(".top-boxes").outerHeight(),resizer:$("#resizer"),resizerHeight:$("#resizer").outerHeight(),dragCover:$("#editor-drag-cover"),editorResizers:$(".editor-resizer"),footerHeight:$(".editor-footer").outerHeight(),dontTreadOnMe:!1,init:function(){this._bindToHub(),this.initLayout(),this.setUpEditorResizers(),this.preventTabletZooming(),null==this.headerHeight&&(this.headerHeight=0)},_bindToHub:function(){Hub.sub("server-ui-change",$.proxy(this._onUIChange,this))},_onUIChange:function(t,o){if(o.ui&&o.ui.layout&&"top"!==o.ui.layout){var e=$("#"+o.ui.layout+"-layout").attr("href");document.location=e}},setUpEditorResizers:function(){Layout.editorResizers.draggable({start:function(){Layout.topBoxesCon.addClass("editor-is-resizing"),Layout.origCSSEditorWidth=$("#box-css").width(),Layout.origHTMLEditorWidth=$("#box-html").width()},stop:function(){Layout.topBoxesCon.removeClass("editor-is-resizing")},axis:"x",drag:function(t,o){"editor-resizer-html"===o.helper[0].id?$("#box-html").css("flex","0 1 "+o.offset.left+"px"):$("#box-css").css("flex","0 1 "+(Layout.origCSSEditorWidth+o.position.left)+"px")},containment:Layout.boxes})},initLayout:function(){$("#box-html").css("flex","0 1 "+$("#box-html").width()+"px");var t=Layout.body.height();Layout.boxResult.height(t-Layout.topBoxesHeight-Layout.resizerHeight-Layout.footerHeight-Layout.headerHeight),Layout.win.resize(function(){t=Layout.body.height(),Layout.topBoxesHeight=$(".top-boxes").outerHeight(),Layout.boxResult.height("pres"===__pageType?t-Layout.topBoxesHeight-Layout.footerHeight:t-Layout.topBoxesHeight-Layout.footerHeight-Layout.headerHeight-Layout.resizerHeight),$(".result > iframe").width(Layout.win.width()),Layout.cmScrollz.height(Layout.topBoxesCon.height()-32)}),Layout.resizer.draggable({start:function(){Layout.dragCover.show()},stop:function(t,o){Layout.stopDragging(t,o)},axis:"y",drag:function(t,o){var e=Layout.body.height();"pres"===__pageType?(Layout.topBoxesCon.height(o.offset.top),Layout.boxResult.height(e-o.offset.top-Layout.footerHeight)):(Layout.topBoxesCon.height(o.offset.top-Layout.headerHeight),Layout.boxResult.height(e-o.offset.top-Layout.footerHeight));var i;"pres"===__pageType?(i=o.offset.top-32,93>i&&(i=93),Layout.cmScrollz.height(i)):(i=o.offset.top-95,93>i&&(i=93),Layout.cmScrollz.height(i))},containment:Layout.boxes})},stopDragging:function(){Layout.dragCover.hide(),"function"==typeof Comment.tweakCommentsSize&&Comment.tweakCommentsSize(),Hub.pub("editor-refresh",{delay:0})},doneLoading:function(){Layout.body.removeClass("prelayout"),Layout.win.load($.proxy(function(){this.body.removeClass("preload")},this)).resize(),Layout.cmScrollz=$(".CodeMirror-scroll, .CodeMirror-scrollbar"),Layout.cmScrollz.height(Layout.topBoxesCon.height()-32)},preventTabletZooming:function(){var t=navigator.userAgent.match(/(iPad)/g)?!0:!1;t&&$("head").append("<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>")}};Layout.init(),Layout.doneLoading();